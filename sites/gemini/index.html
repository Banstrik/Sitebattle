<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚òÄÔ∏è –ü–æ–≥–æ–¥–∞ | –õ—É—á—à–µ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================================================= */
        /* CSS –°–¢–ò–õ–ò                                       */
        /* ========================================================================= */
        :root {
            /* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --primary-color: #90caf9; /* –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤ */
            --secondary-color: #4a4a4a;
            --shadow-color: rgba(0, 0, 0, 0.5);
            --border-radius: 12px;
            --font-family: 'Roboto', sans-serif;
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∏ —Å–±—Ä–æ—Å */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ flex-start –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            gap: 20px;
            grid-template-areas:
                "header"
                "current-weather"
                "hourly-forecast"
                "daily-forecast";
        }

        /* ------------------- HEADER / –ü–û–ò–°–ö ------------------- */
        .header {
            grid-area: header;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--secondary-color);
        }

        .search-form {
            display: flex;
            width: 100%;
            max-width: 400px;
            margin-top: 15px;
        }

        .search-input {
            flex-grow: 1;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            background-color: var(--card-bg);
            color: var(--text-color);
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .search-button {
            padding: 12px 20px;
            border: none;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            background-color: var(--primary-color);
            color: var(--bg-color);
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        .search-button:hover {
            background-color: #64b5f6; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –≥–æ–ª—É–±–æ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .error-message {
            color: #ff8a80; /* –°–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π */
            margin-top: 10px;
            font-weight: 500;
        }

        /* ------------------- –û–°–ù–û–í–ù–û–ô –ë–õ–û–ö –ü–û–ì–û–î–´ ------------------- */
        .current-weather {
            grid-area: current-weather;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 16px var(--shadow-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 350px;
        }

        .weather-location {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .weather-date {
            font-size: 1em;
            color: var(--secondary-color);
            margin-bottom: 20px;
        }

        .weather-main-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .weather-icon {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 0 5px var(--primary-color));
        }

        .weather-temp {
            font-size: 5em;
            font-weight: 300;
            margin-left: 20px;
            line-height: 1;
        }

        .weather-description {
            font-size: 1.5em;
            font-weight: 400;
            text-transform: capitalize;
            margin-bottom: 20px;
            color: #b0b0b0;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
            padding-top: 20px;
            border-top: 1px dashed var(--secondary-color);
        }

        .detail-item {
            padding: 10px;
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            font-size: 0.9em;
        }

        .detail-item strong {
            display: block;
            font-size: 1.2em;
            color: var(--text-color);
        }

        .detail-item span {
            font-size: 0.8em;
            color: #a0a0a0;
        }

        /* ------------------- –ü–†–û–ì–ù–û–ó –ü–û –ß–ê–°–ê–ú ------------------- */
        .hourly-forecast, .daily-forecast {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .hourly-forecast h2, .daily-forecast h2 {
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 1px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .hourly-list {
            display: flex;
            overflow-x: auto; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
            gap: 15px;
            padding: 10px 0;
        }

        /* –°–∫—Ä—ã—Ç–∏–µ –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –¥–∏–∑–∞–π–Ω–∞ */
        .hourly-list::-webkit-scrollbar {
            height: 5px;
        }
        .hourly-list::-webkit-scrollbar-thumb {
            background: var(--secondary-color);
            border-radius: 5px;
        }
        .hourly-list::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        .hour-item {
            flex: 0 0 100px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            text-align: center;
            background-color: var(--secondary-color);
            padding: 10px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: transform 0.2s;
        }

        .hour-item:hover {
            transform: translateY(-5px);
        }

        .hour-item img {
            width: 40px;
            height: 40px;
            margin: 5px 0;
            filter: drop-shadow(0 0 2px var(--primary-color));
        }

        .hour-item .time {
            font-weight: 700;
        }

        .hour-item .temp {
            font-size: 1.2em;
            color: var(--primary-color);
            font-weight: 500;
        }

        /* ------------------- –ü–†–û–ì–ù–û–ó –ü–û –î–ù–Ø–ú ------------------- */
        .daily-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .day-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: var(--border-radius);
            transition: background-color 0.2s;
        }

        .day-item:hover {
            background-color: #555555;
        }

        .day-item .day-name {
            font-weight: 700;
            width: 120px;
        }

        .day-item .day-condition {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-grow: 1;
        }

        .day-item .day-condition img {
            width: 40px;
            height: 40px;
        }

        .day-item .day-temp {
            font-weight: 700;
            color: var(--primary-color);
            width: 120px;
            text-align: right;
        }

        .day-item .day-temp span {
            font-weight: 300;
            color: #a0a0a0;
            margin-left: 5px;
        }

        /* ------------------- –°–û–°–¢–û–Ø–ù–ò–ï –ó–ê–ì–†–£–ó–ö–ò / –ü–£–°–¢–û–ô ------------------- */
        .loading, .initial-state, .error-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 50px;
            font-size: 1.5em;
            color: var(--primary-color);
        }

        .hidden {
            display: none !important;
        }

        /* ========================================================================= */
        /* –ú–ï–î–ò–ê-–ó–ê–ü–†–û–°–´ (–ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨)                    */
        /* ========================================================================= */
        @media (min-width: 768px) {
            .container {
                grid-template-columns: 1fr 1fr;
                grid-template-areas:
                    "header header"
                    "current-weather current-weather"
                    "hourly-forecast hourly-forecast"
                    "daily-forecast daily-forecast";
                gap: 30px;
            }

            .current-weather {
                flex-direction: row;
                justify-content: space-around;
                text-align: left;
            }

            .weather-main-info {
                flex-direction: column;
                margin-left: 0;
            }

            .weather-temp {
                font-size: 6em;
            }

            .details-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: none;
                border-top: none;
                padding-top: 0;
                border-left: 1px dashed var(--secondary-color);
                padding-left: 20px;
            }

            .day-item .day-name {
                width: 150px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                grid-template-columns: 2fr 1fr;
                grid-template-areas:
                    "header header"
                    "current-weather daily-forecast"
                    "hourly-forecast hourly-forecast";
            }

            .details-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .day-item .day-temp {
                width: 150px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="initial-state" class="initial-state">
            <h1>–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ üëÜ</h1>
        </div>

        <div id="loading-state" class="loading hidden">
            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö... ‚è≥</h2>
        </div>

        <div id="error-state" class="error-state hidden">
            <h2 id="error-message">–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω.</h2>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–≤–µ—Å—Ç–∏ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞.</p>
        </div>

        <header class="header">
            <h1>–õ—É—á—à–µ–µ –ü–æ–≥–æ–¥–Ω–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h1>
            <form id="search-form" class="search-form">
                <input type="text" id="city-input" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ú–æ—Å–∫–≤–∞)" required>
                <button type="submit" class="search-button">–ù–∞–π—Ç–∏</button>
            </form>
        </header>

        <section id="current-weather-section" class="current-weather hidden">
            <div>
                <h2 id="location-name" class="weather-location">–ì–æ—Ä–æ–¥</h2>
                <p id="local-date" class="weather-date">–î–∞—Ç–∞</p>

                <div class="weather-main-info">
                    <img id="weather-icon" src="" alt="–ò–∫–æ–Ω–∫–∞ –ø–æ–≥–æ–¥—ã" class="weather-icon">
                    <span id="current-temp" class="weather-temp">--¬∞C</span>
                </div>
                <p id="weather-description" class="weather-description">–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–≥–æ–¥—ã</p>
            </div>

            <div id="details-grid" class="details-grid">
                <div class="detail-item">
                    <span id="feels-like">--¬∞C</span>
                    <span>–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫</span>
                </div>
                <div class="detail-item">
                    <span id="humidity">--%</span>
                    <span>–í–ª–∞–∂–Ω–æ—Å—Ç—å</span>
                </div>
                <div class="detail-item">
                    <span id="wind-speed">-- –∫–º/—á</span>
                    <span>–í–µ—Ç–µ—Ä</span>
                </div>
                <div class="detail-item">
                    <span id="pressure">-- –º–±–∞—Ä</span>
                    <span>–î–∞–≤–ª–µ–Ω–∏–µ</span>
                </div>
                <div class="detail-item">
                    <span id="uv-index">--</span>
                    <span>–£–§-–∏–Ω–¥–µ–∫—Å</span>
                </div>
                <div class="detail-item">
                    <span id="visibility">-- –∫–º</span>
                    <span>–í–∏–¥–∏–º–æ—Å—Ç—å</span>
                </div>
            </div>
        </section>

        <section id="hourly-forecast-section" class="hourly-forecast hidden">
            <h2>–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–∞—Å–∞–º (24 —á–∞—Å–∞)</h2>
            <div id="hourly-list" class="hourly-list">
                </div>
        </section>

        <section id="daily-forecast-section" class="daily-forecast hidden">
            <h2>–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 3 –¥–Ω—è</h2>
            <div id="daily-list" class="daily-list">
                </div>
        </section>

    </div> <script>
        // =========================================================================
        //                           JAVASCRIPT –õ–û–ì–ò–ö–ê
        // =========================================================================

        // --- –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï ---
        const API_KEY = 'b3c49a30ffe144edb72135917250409'; // –í–∞—à –∫–ª—é—á WeatherAPI.com
        const BASE_URL = 'https://api.weatherapi.com/v1/forecast.json';
        const FORECAST_DAYS = 3; // –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 3 –¥–Ω—è

        // --- –≠–õ–ï–ú–ï–ù–¢–´ DOM ---
        const searchForm = document.getElementById('search-form');
        const cityInput = document.getElementById('city-input');

        const initialState = document.getElementById('initial-state');
        const loadingState = document.getElementById('loading-state');
        const errorState = document.getElementById('error-state');
        const errorMessageDisplay = document.getElementById('error-message');

        const currentWeatherSection = document.getElementById('current-weather-section');
        const hourlyForecastSection = document.getElementById('hourly-forecast-section');
        const dailyForecastSection = document.getElementById('daily-forecast-section');

        const locationName = document.getElementById('location-name');
        const localDate = document.getElementById('local-date');
        const weatherIcon = document.getElementById('weather-icon');
        const currentTemp = document.getElementById('current-temp');
        const weatherDescription = document.getElementById('weather-description');

        const feelsLike = document.getElementById('feels-like');
        const humidity = document.getElementById('humidity');
        const windSpeed = document.getElementById('wind-speed');
        const pressure = document.getElementById('pressure');
        const uvIndex = document.getElementById('uv-index');
        const visibility = document.getElementById('visibility');

        const hourlyList = document.getElementById('hourly-list');
        const dailyList = document.getElementById('daily-list');

        // --- –£–¢–ò–õ–ò–¢–´ ---

        /**
         * –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.
         * @param {string} state - 'initial', 'loading', 'error', 'content'
         */
        function toggleState(state) {
            initialState.classList.add('hidden');
            loadingState.classList.add('hidden');
            errorState.classList.add('hidden');
            currentWeatherSection.classList.add('hidden');
            hourlyForecastSection.classList.add('hidden');
            dailyForecastSection.classList.add('hidden');

            switch (state) {
                case 'initial':
                    initialState.classList.remove('hidden');
                    break;
                case 'loading':
                    loadingState.classList.remove('hidden');
                    break;
                case 'error':
                    errorState.classList.remove('hidden');
                    break;
                case 'content':
                    currentWeatherSection.classList.remove('hidden');
                    hourlyForecastSection.classList.remove('hidden');
                    dailyForecastSection.classList.remove('hidden');
                    break;
            }
        }

        /**
         * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è.
         * @param {string} datetimeStr - –°—Ç—Ä–æ–∫–∞ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ –æ—Ç API.
         * @returns {string} –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.
         */
        function formatDateTime(datetimeStr, options) {
            const date = new Date(datetimeStr);
            return date.toLocaleDateString('ru-RU', options);
        }

        /**
         * –ü–æ–ª—É—á–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.
         * @param {string} dateStr - –°—Ç—Ä–æ–∫–∞ –¥–∞—Ç—ã –æ—Ç API (YYYY-MM-DD).
         * @returns {string} –ù–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.
         */
        function getDayName(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'long' };
            const dayName = date.toLocaleDateString('ru-RU', options);
            return dayName.charAt(0).toUpperCase() + dayName.slice(1);
        }

        // --- –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –ó–ê–ì–†–£–ó–ö–ò –î–ê–ù–ù–´–• ---

        /**
         * –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ —Å WeatherAPI.
         * @param {string} city - –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞.
         */
        async function fetchWeather(city) {
            if (!city) return;

            toggleState('loading');

            const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(city)}&days=${FORECAST_DAYS}&aqi=no&alerts=no&lang=ru`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (response.status !== 200 || data.error) {
                    errorMessageDisplay.textContent = `–û—à–∏–±–∫–∞: ${data.error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}.`;
                    toggleState('error');
                    return;
                }

                renderCurrentWeather(data);
                renderHourlyForecast(data.forecast.forecastday[0].hour, data.location.localtime);
                renderDailyForecast(data.forecast.forecastday);

                toggleState('content');

            } catch (error) {
                console.error("Fetch error:", error);
                errorMessageDisplay.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ —Å–±–æ–π API. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.';
                toggleState('error');
            }
        }

        // --- –§–£–ù–ö–¶–ò–ò –†–ï–ù–î–ï–†–ò–ù–ì–ê –ö–û–ù–¢–ï–ù–¢–ê ---

        /**
         * –†–µ–Ω–¥–µ—Ä–∏—Ç —Å–µ–∫—Ü–∏—é —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã.
         */
        function renderCurrentWeather(data) {
            const { current, location } = data;

            locationName.textContent = `${location.name}, ${location.country}`;
            localDate.textContent = formatDateTime(location.localtime, {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            weatherIcon.src = current.condition.icon;
            weatherIcon.alt = current.condition.text;
            currentTemp.textContent = `${Math.round(current.temp_c)}¬∞C`;
            weatherDescription.textContent = current.condition.text;

            feelsLike.textContent = `${Math.round(current.feelslike_c)}¬∞C`;
            humidity.textContent = `${current.humidity}%`;
            windSpeed.textContent = `${Math.round(current.wind_kph)} –∫–º/—á`;
            // –ü–µ—Ä–µ–≤–æ–¥–∏–º hPa –≤ –º–±–∞—Ä (–æ–Ω–∏ –ø–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã)
            pressure.textContent = `${current.pressure_mb} –º–±–∞—Ä`;
            uvIndex.textContent = current.uv;
            visibility.textContent = `${current.vis_km} –∫–º`;
        }

        /**
         * –†–µ–Ω–¥–µ—Ä–∏—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–∞—Å–∞–º.
         */
        function renderHourlyForecast(hourlyData, currentTimeStr) {
            hourlyList.innerHTML = '';

            const currentHour = new Date(currentTimeStr).getHours();

            // –§–∏–ª—å—Ç—Ä—É–µ–º, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–¥—É—â–∏–µ —á–∞—Å—ã (–∏–ª–∏ —Ç–µ–∫—É—â–∏–π —á–∞—Å –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ 23 —á–∞—Å–∞)
            const hoursToShow = hourlyData
                .filter(hour => new Date(hour.time).getHours() >= currentHour || new Date(hour.time).getDate() > new Date(currentTimeStr).getDate())
                .slice(0, 24); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 24 —á–∞—Å–æ–≤

            hoursToShow.forEach(hour => {
                const time = formatDateTime(hour.time, { hour: '2-digit', minute: '2-digit' });
                const temp = `${Math.round(hour.temp_c)}¬∞C`;
                const isCurrent = new Date(hour.time).getHours() === currentHour && new Date(hour.time).getDate() === new Date(currentTimeStr).getDate();

                const hourItem = document.createElement('div');
                hourItem.className = 'hour-item';
                if (isCurrent) {
                     hourItem.style.backgroundColor = 'var(--primary-color)';
                     hourItem.style.color = 'var(--bg-color)';
                }

                hourItem.innerHTML = `
                    <p class="time">${isCurrent ? '–°–µ–π—á–∞—Å' : time}</p>
                    <img src="${hour.condition.icon}" alt="${hour.condition.text}">
                    <p class="temp">${temp}</p>
                    <p class="condition-text" style="font-size: 0.7em;">${hour.condition.text}</p>
                `;
                hourlyList.appendChild(hourItem);
            });
        }

        /**
         * –†–µ–Ω–¥–µ—Ä–∏—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –¥–Ω—è–º.
         */
        function renderDailyForecast(dailyData) {
            dailyList.innerHTML = '';

            dailyData.forEach((day, index) => {
                const dayName = index === 0 ? '–°–µ–≥–æ–¥–Ω—è' :
                                index === 1 ? '–ó–∞–≤—Ç—Ä–∞' : getDayName(day.date);

                const maxTemp = `${Math.round(day.day.maxtemp_c)}¬∞C`;
                const minTemp = `${Math.round(day.day.mintemp_c)}¬∞C`;

                const dayItem = document.createElement('div');
                dayItem.className = 'day-item';

                dayItem.innerHTML = `
                    <div class="day-name">${dayName}</div>
                    <div class="day-condition">
                        <img src="${day.day.condition.icon}" alt="${day.day.condition.text}">
                        <span>${day.day.condition.text}</span>
                    </div>
                    <div class="day-temp">${maxTemp} <span>/ ${minTemp}</span></div>
                `;
                dailyList.appendChild(dayItem);
            });
        }

        // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ---

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const city = cityInput.value.trim();
            if (city) {
                fetchWeather(city);
                localStorage.setItem('lastCity', city); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ—Ä–æ–¥
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≥–æ—Ä–æ–¥–∞
        document.addEventListener('DOMContentLoaded', () => {
            const lastCity = localStorage.getItem('lastCity');
            if (lastCity) {
                cityInput.value = lastCity;
                fetchWeather(lastCity);
            } else {
                toggleState('initial');
            }
        });

    </script>
</body>
</html>
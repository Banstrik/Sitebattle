<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Погодное приложение</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6C63FF;
            --secondary: #4A44C6;
            --dark: #121212;
            --darker: #0A0A0A;
            --light: #E0E0E0;
            --gray: #424242;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(108, 99, 255, 0.3);
        }

        .subtitle {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .search-container {
            display: flex;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: rgba(255, 255, 255, 0.08);
            color: var(--light);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            background: rgba(255, 255, 255, 0.12);
        }

        .search-input::placeholder {
            color: var(--gray);
        }

        .search-btn {
            padding: 0 25px;
            background: var(--primary);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .search-btn:hover {
            background: var(--secondary);
        }

        .current-weather {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .location {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .city-name {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .date {
            color: var(--gray);
            font-size: 1rem;
        }

        .weather-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .temperature {
            font-size: 4rem;
            font-weight: 700;
            display: flex;
            align-items: flex-start;
        }

        .weather-icon {
            font-size: 5rem;
            margin-right: 20px;
            color: var(--primary);
        }

        .weather-description {
            font-size: 1.5rem;
            text-transform: capitalize;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
        }

        .detail-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            color: var(--primary);
            width: 40px;
            text-align: center;
        }

        .detail-info {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .forecast {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .forecast-day {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .forecast-day:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .forecast-date {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--gray);
        }

        .forecast-icon {
            font-size: 2.5rem;
            margin: 10px 0;
            color: var(--primary);
        }

        .forecast-temp {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .forecast-high {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .forecast-low {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .hourly-forecast {
            overflow-x: auto;
            white-space: nowrap;
            padding: 20px 0;
            margin-bottom: 30px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--darker);
        }

        .hourly-forecast::-webkit-scrollbar {
            height: 8px;
        }

        .hourly-forecast::-webkit-scrollbar-track {
            background: var(--darker);
            border-radius: 10px;
        }

        .hourly-forecast::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .hourly-item {
            display: inline-block;
            width: 100px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .hourly-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .hourly-time {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .hourly-icon {
            font-size: 1.8rem;
            margin: 10px 0;
            color: var(--primary);
        }

        .hourly-temp {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .map-container {
            height: 200px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .units-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .unit-btn {
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .unit-btn:first-child {
            border-radius: 8px 0 0 8px;
        }

        .unit-btn:last-child {
            border-radius: 0 8px 8px 0;
        }

        .unit-btn.active {
            background: var(--primary);
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 0.9rem;
            width: 100%;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            display: none;
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .recent-searches {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .recent-search {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recent-search:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .weather-main {
                flex-direction: column;
                text-align: center;
            }

            .temperature {
                font-size: 3rem;
                margin-bottom: 10px;
            }

            .weather-details {
                grid-template-columns: 1fr;
            }

            .forecast {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .current-weather {
                padding: 20px;
            }

            .forecast {
                grid-template-columns: 1fr 1fr;
            }

            .hourly-item {
                width: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-cloud-sun"></i> Погодное приложение</h1>
            <p class="subtitle">Актуальная погода в любом городе мира</p>
        </header>

        <div class="search-container">
            <input type="text" class="search-input" id="search-input" placeholder="Введите название города...">
            <button class="search-btn" id="search-btn"><i class="fas fa-search"></i></button>
        </div>

        <div class="recent-searches" id="recent-searches">
            <!-- Недавние поиски будут добавлены динамически -->
        </div>

        <div class="units-toggle">
            <button class="unit-btn active" id="celsius-btn">°C</button>
            <button class="unit-btn" id="fahrenheit-btn">°F</button>
        </div>

        <div class="error-message" id="error-message">
            Город не найден. Пожалуйста, проверьте правильность написания.
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Загрузка данных о погоде...</p>
        </div>

        <div class="current-weather" id="current-weather">
            <div class="location">
                <div class="city-name" id="city-name">Москва</div>
                <div class="date" id="current-date">Понедельник, 1 января</div>
            </div>

            <div class="weather-main">
                <div class="temperature">
                    <i class="fas fa-sun weather-icon" id="weather-icon"></i>
                    <span id="temperature">24</span><span id="temp-unit">°C</span>
                </div>
                <div class="weather-description" id="weather-description">Солнечно</div>
            </div>

            <div class="weather-details">
                <div class="detail-item">
                    <i class="fas fa-temperature-high detail-icon"></i>
                    <div class="detail-info">
                        <div class="detail-label">Ощущается как</div>
                        <div class="detail-value" id="feels-like">26°C</div>
                    </div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-tint detail-icon"></i>
                    <div class="detail-info">
                        <div class="detail-label">Влажность</div>
                        <div class="detail-value" id="humidity">65%</div>
                    </div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-wind detail-icon"></i>
                    <div class="detail-info">
                        <div class="detail-label">Ветер</div>
                        <div class="detail-value" id="wind-speed">15 км/ч</div>
                    </div>
                </div>
                <div class="detail-item">
                    <i class="fas fa-compress-arrows-alt detail-icon"></i>
                    <div class="detail-info">
                        <div class="detail-label">Давление</div>
                        <div class="detail-value" id="pressure">1013 гПа</div>
                    </div>
                </div>
            </div>
        </div>

        <h2 style="margin-bottom: 15px;">Почасовой прогноз</h2>
        <div class="hourly-forecast" id="hourly-forecast">
            <!-- Почасовой прогноз будет добавлен динамически -->
        </div>

        <h2 style="margin-bottom: 15px;">Прогноз на 3 дня</h2>
        <div class="forecast" id="forecast">
            <!-- Прогноз на 3 дня будет добавлен динамически -->
        </div>

        <h2 style="margin-bottom: 15px;">Карта</h2>
        <div class="map-container">
            <div id="map"></div>
        </div>

        <footer>
            <p>© 2023 Погодное приложение | Данные предоставлены WeatherAPI.com</p>
        </footer>
    </div>

    <script>
        // API ключ
        const API_KEY = 'b3c49a30ffe144edb72135917250409';

        // Элементы DOM
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const cityName = document.getElementById('city-name');
        const currentDate = document.getElementById('current-date');
        const temperature = document.getElementById('temperature');
        const tempUnit = document.getElementById('temp-unit');
        const weatherIcon = document.getElementById('weather-icon');
        const weatherDescription = document.getElementById('weather-description');
        const feelsLike = document.getElementById('feels-like');
        const humidity = document.getElementById('humidity');
        const windSpeed = document.getElementById('wind-speed');
        const pressure = document.getElementById('pressure');
        const hourlyForecast = document.getElementById('hourly-forecast');
        const forecast = document.getElementById('forecast');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('error-message');
        const celsiusBtn = document.getElementById('celsius-btn');
        const fahrenheitBtn = document.getElementById('fahrenheit-btn');
        const recentSearchesContainer = document.getElementById('recent-searches');
        const mapElement = document.getElementById('map');

        // Переменные состояния
        let currentUnit = 'celsius';
        let currentWeatherData = null;
        let map = null;
        let marker = null;

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', () => {
            updateDate();
            loadRecentSearches();
            getWeatherByCity('Moscow'); // Загрузка погоды для Москвы по умолчанию

            // Обработчики событий
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSearch();
            });

            celsiusBtn.addEventListener('click', () => switchUnits('celsius'));
            fahrenheitBtn.addEventListener('click', () => switchUnits('fahrenheit'));
        });

        // Обновление даты
        function updateDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDate.textContent = now.toLocaleDateString('ru-RU', options);
        }

        // Обработка поиска
        function handleSearch() {
            const city = searchInput.value.trim();
            if (city) {
                getWeatherByCity(city);
                addToRecentSearches(city);
                searchInput.value = '';
            }
        }

        // Получение погоды по названию города
        async function getWeatherByCity(city) {
            showLoading();
            hideError();

            try {
                // Получение текущей погоды
                const currentWeatherResponse = await fetch(
                    `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${city}&lang=ru`
                );

                if (!currentWeatherResponse.ok) {
                    throw new Error('Город не найден');
                }

                const currentWeatherData = await currentWeatherResponse.json();

                // Получение прогноза на 3 дня
                const forecastResponse = await fetch(
                    `https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${city}&days=3&lang=ru`
                );

                if (!forecastResponse.ok) {
                    throw new Error('Ошибка получения прогноза');
                }

                const forecastData = await forecastResponse.json();

                // Обновление интерфейса
                updateCurrentWeather(currentWeatherData);
                updateHourlyForecast(forecastData);
                updateForecast(forecastData);
                updateMap(currentWeatherData.location.lat, currentWeatherData.location.lon);

                currentWeatherData = currentWeatherData;

                hideLoading();
            } catch (error) {
                console.error('Ошибка получения данных о погоде:', error);
                showError();
                hideLoading();
            }
        }

        // Обновление текущей погоды
        function updateCurrentWeather(data) {
            cityName.textContent = data.location.name + ', ' + data.location.country;
            temperature.textContent = Math.round(data.current.temp_c);
            weatherDescription.textContent = data.current.condition.text;

            // Обновление иконки погоды
            updateWeatherIcon(weatherIcon, data.current.condition.code, data.current.is_day);

            // Обновление деталей
            feelsLike.textContent = `${Math.round(data.current.feelslike_c)}°C`;
            humidity.textContent = `${data.current.humidity}%`;
            windSpeed.textContent = `${data.current.wind_kph} км/ч`;
            pressure.textContent = `${data.current.pressure_mb} гПа`;
        }

        // Обновление почасового прогноза
        function updateHourlyForecast(data) {
            hourlyForecast.innerHTML = '';
            const hours = data.forecast.forecastday[0].hour;
            const now = new Date();
            const currentHour = now.getHours();

            // Показываем прогноз на следующие 12 часов
            for (let i = currentHour; i < currentHour + 12 && i < 24; i++) {
                const hour = hours[i];
                const hourItem = document.createElement('div');
                hourItem.className = 'hourly-item';

                const time = new Date(hour.time);
                const timeString = time.getHours().toString().padStart(2, '0') + ':00';

                const icon = document.createElement('i');
                updateWeatherIcon(icon, hour.condition.code, hour.is_day);
                icon.className = 'hourly-icon';

                const temp = document.createElement('div');
                temp.className = 'hourly-temp';
                temp.textContent = `${Math.round(hour.temp_c)}°`;

                hourItem.innerHTML = `
                    <div class="hourly-time">${timeString}</div>
                `;
                hourItem.appendChild(icon);
                hourItem.appendChild(temp);

                hourlyForecast.appendChild(hourItem);
            }
        }

        // Обновление прогноза на 3 дня
        function updateForecast(data) {
            forecast.innerHTML = '';
            const days = data.forecast.forecastday;

            days.forEach(day => {
                const date = new Date(day.date);
                const options = { weekday: 'short', day: 'numeric', month: 'short' };
                const dateString = date.toLocaleDateString('ru-RU', options);

                const forecastDay = document.createElement('div');
                forecastDay.className = 'forecast-day';

                const icon = document.createElement('i');
                updateWeatherIcon(icon, day.day.condition.code, 1); // 1 для дневной иконки
                icon.className = 'forecast-icon';

                forecastDay.innerHTML = `
                    <div class="forecast-date">${dateString}</div>
                `;
                forecastDay.appendChild(icon);
                forecastDay.innerHTML += `
                    <div class="forecast-temp">
                        <span class="forecast-high">${Math.round(day.day.maxtemp_c)}°</span>
                        <span class="forecast-low">${Math.round(day.day.mintemp_c)}°</span>
                    </div>
                    <div class="forecast-desc">${day.day.condition.text}</div>
                `;

                forecast.appendChild(forecastDay);
            });
        }

        // Обновление иконки погоды
        function updateWeatherIcon(iconElement, code, isDay) {
            // Очищаем классы
            iconElement.className = '';

            // Добавляем базовый класс
            iconElement.classList.add('fas');

            // Определяем иконку по коду погоды
            if (code === 1000) {
                // Ясно
                iconElement.classList.add(isDay ? 'fa-sun' : 'fa-moon');
            } else if (code === 1003 || code === 1006) {
                // Переменная облачность
                iconElement.classList.add(isDay ? 'fa-cloud-sun' : 'fa-cloud-moon');
            } else if (code === 1009 || code === 1030) {
                // Пасмурно или дымка
                iconElement.classList.add('fa-cloud');
            } else if (code >= 1063 && code <= 1201) {
                // Дождь
                iconElement.classList.add('fa-cloud-rain');
            } else if (code >= 1204 && code <= 1237) {
                // Снег
                iconElement.classList.add('fa-snowflake');
            } else if (code >= 1240 && code <= 1264) {
                // Ливень
                iconElement.classList.add('fa-cloud-showers-heavy');
            } else if (code >= 1273 && code <= 1282) {
                // Гроза
                iconElement.classList.add('fa-bolt');
            } else {
                // По умолчанию
                iconElement.classList.add('fa-cloud');
            }
        }

        // Обновление карты
        function updateMap(lat, lon) {
            // Если карта уже инициализирована, просто перемещаем маркер
            if (map) {
                map.setView([lat, lon], 10);
                if (marker) {
                    marker.setLatLng([lat, lon]);
                } else {
                    marker = L.marker([lat, lon]).addTo(map);
                }
                return;
            }

            // Инициализация карты
            map = L.map('map').setView([lat, lon], 10);

            // Добавление слоя карты (используем OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            // Добавление маркера
            marker = L.marker([lat, lon]).addTo(map);
        }

        // Переключение единиц измерения
        function switchUnits(unit) {
            if (unit === currentUnit) return;

            currentUnit = unit;

            // Обновление активной кнопки
            if (unit === 'celsius') {
                celsiusBtn.classList.add('active');
                fahrenheitBtn.classList.remove('active');
                tempUnit.textContent = '°C';
            } else {
                celsiusBtn.classList.remove('active');
                fahrenheitBtn.classList.add('active');
                tempUnit.textContent = '°F';
            }

            // Конвертация температур
            if (currentWeatherData) {
                const currentTemp = currentWeatherData.current.temp_c;
                const feelsLikeTemp = currentWeatherData.current.feelslike_c;

                if (unit === 'fahrenheit') {
                    temperature.textContent = Math.round((currentTemp * 9/5) + 32);
                    feelsLike.textContent = `${Math.round((feelsLikeTemp * 9/5) + 32)}°F`;

                    // Обновление почасового прогноза
                    updateHourlyTemperatures('fahrenheit');

                    // Обновление прогноза на 3 дня
                    updateForecastTemperatures('fahrenheit');
                } else {
                    temperature.textContent = Math.round(currentTemp);
                    feelsLike.textContent = `${Math.round(feelsLikeTemp)}°C`;

                    // Обновление почасового прогноза
                    updateHourlyTemperatures('celsius');

                    // Обновление прогноза на 3 дня
                    updateForecastTemperatures('celsius');
                }
            }
        }

        // Обновление температур в почасовом прогнозе
        function updateHourlyTemperatures(unit) {
            const hourlyItems = document.querySelectorAll('.hourly-temp');
            hourlyItems.forEach((item, index) => {
                // В реальном приложении здесь нужно использовать сохраненные данные
                // Для демонстрации просто конвертируем текущие значения
                const currentValue = parseInt(item.textContent);
                let newValue;

                if (unit === 'fahrenheit') {
                    newValue = Math.round((currentValue * 9/5) + 32);
                } else {
                    newValue = Math.round((currentValue - 32) * 5/9);
                }

                item.textContent = `${newValue}°`;
            });
        }

        // Обновление температур в прогнозе на 3 дня
        function updateForecastTemperatures(unit) {
            const highTemps = document.querySelectorAll('.forecast-high');
            const lowTemps = document.querySelectorAll('.forecast-low');

            highTemps.forEach(item => {
                const currentValue = parseInt(item.textContent);
                let newValue;

                if (unit === 'fahrenheit') {
                    newValue = Math.round((currentValue * 9/5) + 32);
                } else {
                    newValue = Math.round((currentValue - 32) * 5/9);
                }

                item.textContent = `${newValue}°`;
            });

            lowTemps.forEach(item => {
                const currentValue = parseInt(item.textContent);
                let newValue;

                if (unit === 'fahrenheit') {
                    newValue = Math.round((currentValue * 9/5) + 32);
                } else {
                    newValue = Math.round((currentValue - 32) * 5/9);
                }

                item.textContent = `${newValue}°`;
            });
        }

        // Показать/скрыть загрузку
        function showLoading() {
            loading.style.display = 'block';
            document.getElementById('current-weather').style.opacity = '0.5';
        }

        function hideLoading() {
            loading.style.display = 'none';
            document.getElementById('current-weather').style.opacity = '1';
        }

        // Показать/скрыть ошибку
        function showError() {
            errorMessage.style.display = 'block';
        }

        function hideError() {
            errorMessage.style.display = 'none';
        }

        // Работа с недавними поисками
        function loadRecentSearches() {
            const recent = JSON.parse(localStorage.getItem('recentSearches') || '[]');
            recentSearchesContainer.innerHTML = '';

            recent.forEach(city => {
                const element = document.createElement('div');
                element.className = 'recent-search';
                element.textContent = city;
                element.addEventListener('click', () => {
                    getWeatherByCity(city);
                });
                recentSearchesContainer.appendChild(element);
            });
        }

        function addToRecentSearches(city) {
            let recent = JSON.parse(localStorage.getItem('recentSearches') || '[]');

            // Удаляем город, если он уже есть в списке
            recent = recent.filter(item => item.toLowerCase() !== city.toLowerCase());

            // Добавляем город в начало списка
            recent.unshift(city);

            // Ограничиваем список 5 элементами
            if (recent.length > 5) {
                recent = recent.slice(0, 5);
            }

            // Сохраняем в localStorage
            localStorage.setItem('recentSearches', JSON.stringify(recent));

            // Обновляем отображение
            loadRecentSearches();
        }
    </script>

    <!-- Подключение библиотеки Leaflet для карты -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</body>
</html>